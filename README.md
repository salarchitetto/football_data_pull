
# Football-Data-Pull

A data aggregation project focused on pulling and processing soccer data for analytics. This repository is in its early stages (version 0.01), with plans to grow as we integrate more data sources. Right now, weâ€™re pulling data from FootballDataUK and storing it in a PostgreSQL database, but we aim to funnel multiple sources in the future.

This project is part of a larger initiative to make soccer data more accessible and useful for fans, analysts, and developers alike. As the project evolves, we hope to contribute to the community by providing a centralized, well-organized source of soccer data.

## How It Works
There will be multiple sources, but the working one currently is [football_data_uk_run.py](football_data_uk_run.py)
The main file (`football_data_uk_run.py`) handles the data ingestion and processing pipeline,
this will work the same way for most ingestion types:

1. **Set the number of seasons to ingest:** You can configure the number of seasons you'd like to process by setting the `NUMBER_OF_SEASONS` variable. The data is fetched without duplication, ensuring that previous ingests are respected.
   
2. **Configurator Setup:** The `Configurator` class manages the settings for different leagues and countries, allowing the system to know where to pull the data from.
   
3. **Data Cleansing:** After downloading data from Excel sheets (primarily from FootballDataUK), the data is processed through a cleansing function (`dataframe_cleanser`), which standardizes and formats the data for storage.

4. **High-Water Mark:** We use the `HighWaterMarkProcessor` to determine if there is new data since the last ingestion. If no new data exists, the process skips that particular dataset.

5. **UUID Generation:** For every team in the dataset, a unique UUID is generated by the `TeamUUIDGenerator`. This ensures that teams are consistently identified across different data sources and time periods.

6. **Data Storage:** The processed data, with added UUIDs, is inserted into the `results` table in the PostgreSQL database.

7. **Logging:** Comprehensive logging is implemented to track the progress of data ingestion, processing times, and any issues encountered.

## Data Collection and Sources

Currently, this is a Python-based application that primarily uses the `Polars` library to process soccer data. Right now, we are downloading Excel sheets from [FootballDataUK](https://www.football-data.co.uk/). A big shout-out to Joseph Buchdahl for compiling this data and making it freely available.

The end goal is to integrate additional data sources to provide a comprehensive view of soccer analytics.

### Leagues Provided

| League Name           | Country     |
|-----------------------|-------------|
| Premier League        | England     |
| Championship          | England     |
| Scottish Premiership  | Scotland    |
| Scottish Championship | Scotland    |
| Bundesliga            | Germany     |
| Bundesliga 2          | Germany     |
| Serie A               | Italy       |
| Serie B               | Italy       |
| La Liga               | Spain       |
| La Liga 2             | Spain       |
| Ligue 1               | France      |
| Ligue 2               | France      |
| Eredivisie            | Netherlands |
| Belgium Pro League    | Belgium     |
| Liga Portugal         | Portugal    |

## Database Setup

### `.env` Variables
You'll need to set up a `.env` file with the following variables for the Dockerized PostgreSQL container to work. These are referenced in the `FootyPostgres` class.

```
POSTGRES_USER=<insert-here>
POSTGRES_PASSWORD=<insert-here>
POSTGRES_DB=<insert-here>
POSTGRES_PORT=<insert-here>
POSTGRES_HOST=<insert-here>
```

### Docker Commands
To set up the database using Docker, run the following commands:

1. `docker-compose up [-d]` (Use `-d` if you'd like to run in the background)

Optional steps to check if the container is set up correctly:

2. `docker exec -it <docker-container-id> bash`
3. `psql -U <POSTGRES_USER> <POSTGRES_DB>`

If all goes well, you should be able to access your PostgreSQL instance and store your Footy Data.

## Future Plans

- **Integrating More Data Sources:** We're actively looking to incorporate additional soccer data sources to enhance the dataset.
- **Testing and Validation:** Unit testing and validation checks will be added in future updates.
- **API Development:** We'll expose the data via API endpoints to make querying easier.
- **Analytics Platform:** Long-term goal is to develop an analytics dashboard to provide insights from the collected data.

## Authors
If you have any questions or would like to contribute, feel free to reach out!

- [@salarchitetto](https://www.github.com/salarchitetto)